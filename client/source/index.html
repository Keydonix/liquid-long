<!DOCTYPE html>

<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="index.css" rel="stylesheet" type="text/css" integrity="sha384-IWD7iU6LdfgDfxE/K0Q/2yWCWWZqGgmiGEHWrBm6TAS+tMEoqAfDJmI2HRHeM/jq">
	<script src="index.js" type="module" integrity="sha384-c/VYzHTZA6OHCGJBU+kUYMl9drxCX4B+Mzbx6xOwGtFYIC2XfhAye6uwJ/iL9Z8b"></script>
</head>

<body>
	<div id="network-name">
		Network: <span class="loading"></span>
	</div>

	<nav>
		<ul>
			<li>
				<input type="button" id="open-cdp-nav" class="nav-text active" value="Open">
			</li>
			<li>
				<input type="button" id="close-cdp-nav" class="nav-text" value="Close">
			</li>
			<li>
				<a id="account-label" class="nav-text" href="" target="_blank"></a>
			</li>
		</ul>
	</nav>

	<div id="root-div">
		<form id="open-cdp-form" onsubmit="return false">
			<table>
				<tr>
					<td style="text-align:right">Official Price of ETH</td>
					<td><ins id="eth-price"><span class="loading"></span></ins> USD</td>
				</tr>
				<tr>
					<td style="text-align:right">Estimated Price of ETH</td>
					<td><ins id="estimated-eth-price"><span class="loading"></span></ins> DAI</td>
				</tr>
				<tr>
					<td style="text-align: right">Limit Price of ETH</td>
					<td>
						<!-- FIXME: we use onblur here so we aren't hammering the ethereum node with updates as the user types, but this means that field updates that don't result in blur don't work (e.g., range increase/decrease in Firefox).  Consider changing to onchange, but then having JS side rate limiting or baked in delays. -->
						<input id="limit-eth-price" type="number" autocomplete="off" autofocus="false" inputmode="decimal" min="0" max="0" step="0.01"
						placeholder="?" required="true" tabindex="10" value="">
					</td>
				</tr>
				<tr>
					<td style="text-align:right">Leverage Target</td>
					<td>
						<input id="leverage-multiplier" type="number" autocomplete="off" autofocus="false" inputmode="decimal" min="1" max="3" step="0.01"
						placeholder="2.0" required="true" tabindex="20" value="">
					</td>
				</tr>
				<tr>
					<td style="text-align:right">Liquidation Price</td>
					<td><ins id="liquidation-price"><span class="loading"></span></ins> USD</td>
				</tr>
				<tr>
					<td style="text-align: right">ETH to Leverage</td>
					<td>
						<input id="leverage-size" type="number" autocomplete="off" autofocus="false" inputmode="decimal" min="0" max="1000" step=".0001"
						placeholder="1.0" required="true" tabindex="30" value="">
					</td>
				</tr>
				<tr>
					<td style="text-align:right">Our Fee</td>
					<td><ins id="fee-provider"><span class="loading"></span></ins> ETH</td>
				</tr>
				<tr>
					<td style="text-align:right">Exchange Costs</td>
					<td><ins id="fee-exchange"><span class="loading"></span></ins> ETH</td>
				</tr>
				<tr>
					<td style="text-align: right">Total</td>
					<td><ins id="fee-total"><span class="loading"></span></ins> ETH</td>
				</tr>
				<tr>
					<td colspan="2" style="text-align: center">
						<input id="create-cdp-button" type="submit" value="Create CDP">
					</td>
				</tr>
			</table>
		</form>

		<form id="close-cdp-form" onsubmit="return false" hidden>
			<table>
				<thead>
					<tr>
						<th rowspan="2">ID</th>
						<th rowspan="2">ETH Collateral</th>
						<th rowspan="2">DAI Debt</th>
						<th colspan="2">Closing Costs</th>
						<th rowspan="2">Total Return</th>
						<th rowspan="2" colspan="2">Close CDP</th>
					</tr>
					<tr>
						<th>Our Fee</th>
						<th>Exchange Cost</th>
					</tr>
				</thead>
				<tbody id="my-cdps-table">
				</tbody>
			</table>
		</form>
	</div>

<template id="cdp-row">
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td>
			<button>Close (step 1/2)</button>
		</td>
		<td>
			<button>Close (step 2/2)</button>
		</td>
	</tr>
</template>
</body>

</html>
